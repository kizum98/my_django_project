{% extends "main_page.html" %}

{% block title %}
{{article.title}}
{% endblock %}

{% block content %}

<header>
    <nav class="navbar navbar-expand-xl navbar-dark fixed-top bg-dark col-xl-1 ">
        <a class="navbar-brand" href="?">
            Навигация по статье
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarCollapse"
                aria-expanded="false">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto sidenav nav-pills">
                <li class="nav-item ">
                    <a class="nav-link" href="#title">Заголовок <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#text">Текст <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#comments">Коментарии <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#new_articles">Читайте также <span class="sr-only">(current)</span></a>
                </li>
                <hr>
                <li class="nav-item">
                    <a class="nav-link text-primary" href="{% url 'articles:list_articles_view' %}">На главную <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-success" href="{% url 'articles:article_modify' article.id %}">Редактировать <span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<main class="content-wrapper">
    <div class="card mb-3 text-center" id="title">
        <div class="card-header md-3 ">
            <h2 class="card-title"><b>{{article.title}}</b></h2>
        </div>
        <div class="card-body">
            <h4 class="card-text"><i>{{article.category}}</i></h4>
            <h4 class="card-text"><i>{{article.user_name}}</i></h4>
            <h4 class="card-text"><i>{{article.date_send}}</i></h4>
            <hr>
        </div>
    </div>

    <div class="card mb-3" id="text">
        {% if article.file %}
        <div class="card-img-top text-center">
            <img src="{{article.file.url}}" class="img-fluid" alt="Responsive image"/>
        </div>
        {% endif %}
        <div class="card-body">
            <p class="card-text">{{article.text}}</p>
        </div>
        <div class="card-footer">
              {{form.is_show}}  Отметить статью
        </div>
    </div>

    <div class="card mb-3 text-center"  id="comments">
        <form method="post" action=".#comments">
            {% csrf_token %}
            <div class="card-header md-3" >
                <h2>Добавить ответ</h2>
            </div>

            <div class="card-body md-2">
                {{form.text_answer}}

                <div class="g-recaptcha">{{form.captcha}}</div>
                {% if reset %}
                <b>Ошибка ввода капчи, вы робот!</b>
                <br>
                {% endif %}
                <input class="btn btn-outline-primary" type="submit" value="Добавить">
            </div>
        </form>
    </div>

    <div class="card mb-3 text-center bg-dark border-white" id="new_articles">
        <div class="card-header md-3 text-white" >
            <h2>Читайте также</h2>
        </div>
        <div class="card-bodymd-3" >
        <div class="row mr-2 ml-2" >
            {% for i in last_articles_qs %}
            <div class="col-xl-2 col-lg-4 col-md-6 col-12 d-flex mb-2" >
                <div class="card text-center flex-fill border-primary">
                    <div class="card-header ">
                        <i>{{i.category}}</i>
                    </div>
                    <div class="card-body">
                        <a class="card-text" href="{% url 'articles:article_view' i.id%}">{{i.title}}</a>
                    </div>
                    {% if i.file %}
                    <div class="card-img-bottom">
                        <img src="{{i.file.url}}" class="img-fluid" alt="Responsive image"/>
                    </div>
                    {% endif %}
                    <div class="card-footer">
                        <i class="text-muted">{{i.date_send}}</i>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        </div>
    </div>
</main>

{% endblock %}
